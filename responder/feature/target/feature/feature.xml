<?xml version="1.0" encoding="UTF-8"?>
<features name="encryptedquery-responder" 
	 xmlns="http://karaf.apache.org/xmlns/features/v1.3.0" 
	 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	 xsi:schemaLocation="http://karaf.apache.org/xmlns/features/v1.3.0 http://karaf.apache.org/xmlns/features/v1.3.0">
	
	
	<repository>mvn:org.apache.camel.karaf/apache-camel/2.21.1/xml/features</repository>
	<repository>mvn:org.apache.karaf.features/standard/4.2.0/xml/features</repository>
	<repository>mvn:org.apache.karaf.features/enterprise/4.2.0/xml/features</repository>
	<repository>mvn:org.apache.aries.jpa/jpa-features/2.7.0/xml/features</repository>
 	<repository>mvn:org.ops4j.pax.jdbc/pax-jdbc-features/1.3.0/xml/features</repository>


	<feature name='apache-commons' description='Apache Commons' version='1.0.0'>
		<bundle>mvn:commons-io/commons-io/2.6</bundle>
		<bundle>mvn:org.apache.commons/commons-lang3/3.5</bundle>
		<bundle>mvn:commons-codec/commons-codec/1.11</bundle>
	</feature>


	<feature name="encryptedquery-responder-core" version="2.0.0" description="Provides the EncryptedQuery Responder Core">

    	<details>EncryptedQuery Responder Core</details>

		<!-- Select which ModPow to use -->
     	<config name="org.enquery.encryptedquery.encryption.impl.ModPowAbstractionJavaImpl">
     	</config>
     	<config name="org.enquery.encryptedquery.healthcheck.impl.ComponentStateHealthCheck">
     		.ignore.component=["org.enquery.encryptedquery.encryption.impl.ModPowAbstractionGMPImpl", "org.enquery.encryptedquery.responder.flink.jdbc.runner.FlinkJdbcQueryRunner", "org.enquery.encryptedquery.responder.standalone.runner.StandaloneQueryRunner"]
     	</config>
     	
     	<config name="org.enquery.encryptedquery.healthcheck.impl.CamelHealthCheck">
     		.required.camel=["rest", "data-import"]
     	</config>
     	
     	<!--  
     	<config name="org.enquery.encryptedquery.encryption.impl.ModPowAbstractionGMPImpl">
     	</config>
     	<config name="org.enquery.encryptedquery.healthcheck.impl.ComponentStateHealthCheck">
     		.ignore.component=org.enquery.encryptedquery.encryption.impl.ModPowAbstractionJavaImpl
     	</config>
     	-->
     	
     	<!-- Set the context path from Maven property -->
     	<config name="encrypted.query.responder.rest">
     		context.path=/responder
     	</config>
     	<config name="org.enquery.encryptedquery.health.status">
     		context.path=/responder
     	</config>
     	
     	<!-- needed for XML generation see data-schema module -->
  	    <bundle>mvn:com.sun.xml.bind/jaxb-core/2.3.0</bundle>
     	
		<feature>standard</feature>
		<feature>apache-commons</feature>
		<feature>aries-blueprint</feature>
		<feature>war</feature>
 		<feature>camel-core</feature>
		<feature>camel-servlet</feature>
		<feature>camel-blueprint</feature>
		<feature>camel-jackson</feature>
		<feature>camel-http4</feature>
		<feature>camel-jaxb</feature>
		<feature>camel-quartz2</feature>
		<feature>camel-script</feature>
		<feature>camel-script-groovy</feature>
		<feature>jndi</feature>
		<feature>hibernate</feature>
        <feature>transaction</feature>
		<feature version="2.7.0">jpa</feature>
		<feature version="1.3.0">pax-jdbc</feature>
        <feature version="1.3.0">pax-jdbc-config</feature>
				
        <bundle>mvn:org.liquibase/liquibase-core/3.6.1</bundle>
 		<bundle>mvn:org.yaml/snakeyaml/1.21</bundle>
        
        <bundle>mvn:org.enquery.encryptedquery/encryptedquery-jpa/2.0.0</bundle>
        <bundle>mvn:org.enquery.encryptedquery/encryptedquery-xml/2.0.0</bundle>
        <bundle>mvn:org.enquery.encryptedquery/encryptedquery-json/2.0.0</bundle>
        <bundle>mvn:org.enquery.encryptedquery/encryptedquery-core/2.0.0</bundle>
        <bundle>mvn:org.enquery.encryptedquery/encryptedquery-health-status/2.0.0</bundle>
  
        <bundle dependency="true">mvn:net.java.dev.jna/jna/4.5.1</bundle>
        <bundle>wrap:mvn:com.squareup.jnagmp/jnagmp/2.1.0</bundle>
        
        <bundle>mvn:org.enquery.encryptedquery/encryptedquery-responder-business/2.0.0</bundle>
        <bundle>mvn:org.enquery.encryptedquery/encryptedquery-responder-data/2.0.0</bundle>
        <bundle>mvn:org.enquery.encryptedquery/encryptedquery-responder-integration/2.0.0</bundle>
	
		<!-- the query runners -->
        <bundle>mvn:org.enquery.encryptedquery/encryptedquery-flink-jdbc-runner/2.0.0</bundle>
        <bundle>mvn:org.enquery.encryptedquery/encryptedquery-standalone-runner/2.0.0</bundle>
	</feature>    	
    	
    <feature name="encryptedquery-responder-mariadb" version="2.0.0"
    	description="Provides the EncryptedQuery Responder on a MariaDB Database">
    	
    	<details>EncryptedQuery Responder With MariaDB</details>
    	
    	<!-- javax.persistence.jdbc.driver=org.mariadb.jdbc.Driver -->
    		
    	<config name="org.enquery.encryptedquery.jpa.config.EMConfigurator">
    		emfb.target=(osgi.unit.name=responderPersistenUnit)
            ds.target=(osgi.jndi.service.name=responder)
    		javax.persistence.provider=org.hibernate.jpa.HibernatePersistenceProvider
    		hibernate.dialect=org.hibernate.dialect.MariaDBDialect
    		hibernate.show_sql=true
    		hibernate.format_sql=true
    		hibernate.hbm2ddl.auto=none
     	</config>

		<feature>encryptedquery-responder-core</feature>
		
        <bundle dependency="true">mvn:org.mariadb.jdbc/mariadb-java-client/2.3.0</bundle>
        <bundle>mvn:org.ops4j.pax.jdbc/pax-jdbc-mariadb/1.3.0</bundle>
        <bundle>mvn:org.enquery.encryptedquery/encryptedquery-responder-data-mariadb/2.0.0</bundle>
    </feature>
    
    <feature name="encryptedquery-responder-derbydb" version="2.0.0"
    	description="Provides the EncryptedQuery Responder on a Derby Database">
    	
    	<details>EncryptedQuery Responder With Derby</details>
    	
    	<config name="org.enquery.encryptedquery.jpa.config.EMConfigurator">
    		emfb.target=(osgi.unit.name=responderPersistenUnit)
            ds.target=(osgi.jndi.service.name=responder)
    		javax.persistence.provider=org.hibernate.jpa.HibernatePersistenceProvider
    		hibernate.dialect=org.hibernate.dialect.DerbyTenSevenDialect
    		hibernate.show_sql=false
    		hibernate.format_sql=true
    		hibernate.hbm2ddl.auto=none
    	</config>

		<feature>encryptedquery-responder-core</feature>
     
     	 <bundle>mvn:org.apache.derby/derby/10.13.1.1</bundle>
     	 <bundle>wrap:mvn:org.apache.derby/derbytools/10.13.1.1</bundle>
         <bundle>mvn:org.ops4j.pax.jdbc/pax-jdbc-derby/1.3.0</bundle>
         <bundle>mvn:org.enquery.encryptedquery/encryptedquery-responder-data-derby/2.0.0</bundle>
    </feature>
</features>

